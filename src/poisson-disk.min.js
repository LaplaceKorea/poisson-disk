!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.PoissonDisk=e()}(this,function(){"use strict";var t,e,l,n,i,o,r,a,h,u={width:0,height:0,cellSize:0,data:[]};function f(t,e){let l=Math.floor(t/u.cellSize)+Math.floor(e/u.cellSize)*u.width;return u.data[l]=[t,e],a.push([t,e]),{done:!1,value:[t,e]}}function c(o,r){if(o<t||o>e||r<l||r>n)return!1;let a=Math.floor((o-t)/u.cellSize),h=Math.floor((r-l)/u.cellSize),f=0,c=0,s=0;for(c=a-2;c<=a+2;c++)for(s=h-2;s<=h+2;s++)if(!(c<0||c>=u.width||s<0||s>=u.height)&&(f=c+s*u.width,null!==u.data[f]&&d([o,r],u.data[f])<=i*i))return!1;return!0}function d(t,e){let l=e[0]-t[0],n=e[1]-t[1];return l*l+n*n}return function(d,s,p,M){return t=parseFloat(d[0]),e=parseFloat(d[1]),l=parseFloat(d[2]),n=parseFloat(d[3]),i=parseFloat(s),o=parseInt(p)||30,r="function"==typeof M?M:Math.random,u.cellSize=i*Math.SQRT1_2,u.width=Math.ceil((e-t)/u.cellSize),u.height=Math.ceil((n-l)/u.cellSize),u.data=new Array(u.width*u.height),u.data.fill(null),a=[],h=!0,{next:function(){let u=0,d=0;if(h)return h=!1,f(u=t+(e-t)*r(),d=l+(n-l)*r());let s=0,p=[];for(;a.length>0;){s=a.length*r()|0,p=a[s];let t=0,e=0;for(let l=0;l<o;l++)if(t=i*(1+r()),e=2*Math.PI*r(),c(u=p[0]+t*Math.cos(e),d=p[1]+t*Math.sin(e)))return f(u,d);a.splice(s,1)}return{done:!0,value:null}}}}});
